<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/images/favicon.ico" rel="icon" type="image/ico" />

    <title>SplashKit - Articles - Guides - Tags - Networking - Routing With Servers</title>

    <link href="/stylesheets/main-19a89ca6.css" rel="stylesheet" />
  </head>
  <body class="articles articles_guides articles_guides_tags articles_guides_tags_networking articles_guides_tags_networking_routing-with-servers articles_guides_tags_networking_routing-with-servers_index">
    <nav class="navbar navbar-dark sk-navbar">
  <button class="navbar-toggler collapsed hidden-md-up" type="button" data-toggle="collapse" data-target="#global-navbar-content" aria-controls="global-navbar-content" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fa sk-navbar-toggler-icon"></i>
  </button>
  <div class="collapse container navbar-toggleable-sm" id="global-navbar-content">
    <a class="navbar-brand" href="/">SplashKit</a>
    <ul class="nav navbar-nav">
      <li class="nav-item dropdown">
        <a class="nav-link " id="api-menu-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Documentation</a>
        <div class="dropdown-menu sk-api-menu" aria-labelledby="api-menu-link">
            <a class="dropdown-item" href="/api/animations">Animations</a>
            <a class="dropdown-item" href="/api/audio">Audio</a>
            <a class="dropdown-item" href="/api/camera">Camera</a>
            <a class="dropdown-item" href="/api/color">Color</a>
            <a class="dropdown-item" href="/api/database">Database</a>
            <a class="dropdown-item" href="/api/geometry">Geometry</a>
            <a class="dropdown-item" href="/api/graphics">Graphics</a>
            <a class="dropdown-item" href="/api/input">Input</a>
            <a class="dropdown-item" href="/api/json">JSON</a>
            <a class="dropdown-item" href="/api/networking">Networking</a>
            <a class="dropdown-item" href="/api/physics">Physics</a>
            <a class="dropdown-item" href="/api/resource-bundles">Resource Bundles</a>
            <a class="dropdown-item" href="/api/resources">Resources</a>
            <a class="dropdown-item" href="/api/social">Social</a>
            <a class="dropdown-item" href="/api/sprites">Sprites</a>
            <a class="dropdown-item" href="/api/terminal">Terminal</a>
            <a class="dropdown-item" href="/api/timers">Timers</a>
            <a class="dropdown-item" href="/api/types">Types</a>
            <a class="dropdown-item" href="/api/utilities">Utilities</a>
            <a class="dropdown-item" href="/api/windows">Windows</a>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="/articles">Articles &amp; Guides</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="http://github.com/splashkit">Contribute</a>
      </li>
    </ul>
    <form class="form-inline pull-sm-right">
      <div class="input-group" id="sk-global-search">
        <span class="input-group-addon">
          <i class="fa fa-search"></i>
        </span>
        <input class="search form-control" required type="text" placeholder="Search API...">
        <div class="sk-search-results-container">
          <ul class="sk-search-results list"></ul>
          <div class="sk-search-noâ€“results">
            <i class="fa fa-question-circle fa-2x"></i>
            <p>No results found</p>
          </div>
        </div>
      </div>
    </form>
  </div>
</nav>

    <main id="content">
        <div class="container">
    <div class="row">
        <h1>Routing With Servers</h1>
        <aside class="sk-sidebar">
    <h3>All Guides</h3>
    <nav role="navigation">
      <ul class="nav sk-article-nav-root">
          <li class="nav-item">
<a href="/articles/guides/tags/networking" class="nav-link ">              Networking
</a>          </li>
          <li class="nav-item">
<a href="/articles/guides/tags/starter" class="nav-link ">              Starter
</a>          </li>
          <li class="nav-item">
<a href="/articles/guides/tags/camera" class="nav-link ">              Camera
</a>          </li>
          <li class="nav-item">
<a href="/articles/guides/tags/audio" class="nav-link ">              Audio
</a>          </li>
          <li class="nav-item">
<a href="/articles/guides/tags/animations" class="nav-link ">              Animations
</a>          </li>
          <li class="nav-item">
<a href="/articles/guides/tags/json" class="nav-link ">              JSON
</a>          </li>
          <li class="nav-item">
<a href="/articles/guides/tags/utilities" class="nav-link ">              Utilities
</a>          </li>
          <li class="nav-item">
<a href="/articles/guides/tags/databases" class="nav-link ">              Databases
</a>          </li>
      </ul>
    </nav>
  </aside>
  <article class="sk-content">
      <p class="lead">
        Written by
            <a href="http://github.com/franknsten">Isaac Wallis</a>
        on Aug 10 2018
      </p>
    <p>This article extends the skills gained from <a href="../getting-started-with-servers/">getting started with servers</a>, specifically around serving different files for different paths</p>

<h2>Routing</h2>

<p>Routing is an important part of the web server&rsquo;s job. This is how you get different pages depending on your requests for login, home, or about, pages on a site. Basically, a URL is structured <strong>[serverName]:[port]/[route]</strong>, for example <strong>localhost:8080/login</strong></p>

<h3>Recap of servers</h3>

<p>Start with this code, which we built in the introduction guide</p>

<div class="sk-snippet">
  <ul class="nav nav-tabs" role="tablist">
      <li class="nav-item">
        <a href="#cpp-server_basic" aria-controls="cpp-server_basic" role="tab" data-toggle="tab" class="nav-link active">
          C++
        </a>
      </li>
  </ul>
  <div class="tab-content">
      <div role="tabpanel" id="cpp-server_basic" class="tab-pane fade in active" data-clipboard data-clipboard-target="#cpp-server_basic pre">
        <pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre><span class="cp">#include "splashkit.h"
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">write_line</span><span class="p">(</span><span class="s">"About to start the server..."</span><span class="p">);</span>
    
    <span class="c1">// Start a web server - defaults to listening to port 8080
</span>    <span class="n">web_server</span> <span class="n">server</span> <span class="o">=</span> <span class="n">web_server</span><span class="p">();</span>

    <span class="n">write_line</span><span class="p">(</span><span class="s">"Waiting for a request - navigate to http://localhost:8080"</span><span class="p">);</span>

    <span class="c1">// Wait and get the first request that comes in
</span>    <span class="n">http_request</span> <span class="n">request</span> <span class="o">=</span> <span class="n">next_web_request</span><span class="p">(</span><span class="n">server</span><span class="p">);</span>

    <span class="c1">// Send back the index.html file
</span>    <span class="n">send_html_file_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"index.html"</span><span class="p">);</span>

    <span class="c1">// For now we are done... so lets shutdown...
</span>    <span class="n">stop_web_server</span><span class="p">(</span><span class="n">server</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></pre></td></tr></tbody></table>
</code></pre>
      </div>
  </div>
</div>

<p>This has the following information we need:</p>

<ul>
<li><code>server</code>, the web server on port 8080 we will be working with</li>
<li><code>request</code>, the HTTP request that we&rsquo;re going to be sending responses to</li>
</ul>

<h3>Preparing Pages</h3>

<p>You should have an index.html file in <code>Resources/server</code> in your project folder, which we served to users last time. Create 3 copies, and name them login.html, about.html, contact.html. Edit the content inside the <code>&lt;p&gt;</code> tags to reflect the new names. You don&rsquo;t have to do anything too fancy, just add a message that identifies it as a different page. Your folder should now have the following files in it:</p>

<ul>
<li>index.html</li>
<li>login.html</li>
<li>about.html</li>
<li>contact.html</li>
</ul>

<h3>Checking Requests</h3>

<p>Checking to see if a request has been made for a certain path is really easy! SplashKit provides a <a href="/api/networking/#is-get-request-for">Is GET Request For</a> function that lets you pass in a path, and it lets you know if the request is for that path. Alternately, you can also use <a href="/api/networking/#request-uri">Request URI</a> or <a href="/api/networking/#request-uri-stubs">Request URI Stubs</a> if you want to dynamically respond to the details in the request. <a href="/api/networking/#is-get-request-for">Is GET Request For</a> returns a boolean, True or False, which we can use in an if statement to check each of the resources we want to serve.</p>

<p>The following code shows the use of an if statement to serve some login text or the index page, depending on what the browser requested.</p>

<div class="sk-snippet">
  <ul class="nav nav-tabs" role="tablist">
      <li class="nav-item">
        <a href="#cpp-server_routes0" aria-controls="cpp-server_routes0" role="tab" data-toggle="tab" class="nav-link active">
          C++
        </a>
      </li>
  </ul>
  <div class="tab-content">
      <div role="tabpanel" id="cpp-server_routes0" class="tab-pane fade in active" data-clipboard data-clipboard-target="#cpp-server_routes0 pre">
        <pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="rouge-code"><pre><span class="cp">#include "splashkit.h"
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">write_line</span><span class="p">(</span><span class="s">"About to start the server..."</span><span class="p">);</span>

    <span class="n">web_server</span> <span class="n">server</span> <span class="o">=</span> <span class="n">start_web_server</span><span class="p">();</span>
    <span class="n">http_request</span> <span class="n">request</span><span class="p">;</span>

    <span class="n">write_line</span><span class="p">(</span><span class="s">"Waiting for a request - navigate to http://localhost:8080"</span><span class="p">);</span>

    <span class="c1">//Get the next request that the server has
</span>    <span class="n">request</span> <span class="o">=</span> <span class="n">next_web_request</span><span class="p">(</span><span class="n">server</span><span class="p">);</span>

    <span class="n">write_line</span><span class="p">(</span><span class="s">"I got a request for "</span> <span class="o">+</span> <span class="n">request_uri</span><span class="p">(</span><span class="n">request</span><span class="p">));</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">is_get_request_for</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"/login"</span><span class="p">)</span> <span class="n">or</span> <span class="n">is_get_request_for</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"/login.html"</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="c1">// Serve page for login path, e.g.
</span>        <span class="c1">// send_html_file_response(request, "login.html");
</span>
        <span class="n">send_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"login page"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="c1">//If no specified path is requested, serve index.html to the user
</span>        <span class="n">send_html_file_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"index.html"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">write_line</span><span class="p">(</span><span class="s">"About to stop the server..."</span><span class="p">);</span>
    <span class="n">stop_web_server</span><span class="p">(</span><span class="n">server</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</code></pre>
      </div>
  </div>
</div>

<h3>Handling Multiple Requests</h3>

<p>You&rsquo;ll usually want your server to handle lots of requests, not just one then quit. The easiest way to do this is using a while loop that:</p>

<ol>
<li>gets the next request</li>
<li>processes the request</li>
<li>sends an appropriate response</li>
</ol>

<p>You can then add a special route that will stop the server.</p>

<p>The following code illustrates the use of the concepts covered so far. You can now make multiple requests in your browser, and you can navidate to [http://localhost:8080/quit] to get the web server to stop.</p>

<div class="sk-snippet">
  <ul class="nav nav-tabs" role="tablist">
      <li class="nav-item">
        <a href="#cpp-server_routes" aria-controls="cpp-server_routes" role="tab" data-toggle="tab" class="nav-link active">
          C++
        </a>
      </li>
  </ul>
  <div class="tab-content">
      <div role="tabpanel" id="cpp-server_routes" class="tab-pane fade in active" data-clipboard data-clipboard-target="#cpp-server_routes pre">
        <pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre></td><td class="rouge-code"><pre><span class="cp">#include "splashkit.h"
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">write_line</span><span class="p">(</span><span class="s">"About to start the server..."</span><span class="p">);</span>

    <span class="n">web_server</span> <span class="n">server</span> <span class="o">=</span> <span class="n">start_web_server</span><span class="p">();</span>
    <span class="n">http_request</span> <span class="n">request</span><span class="p">;</span>

    <span class="n">write_line</span><span class="p">(</span><span class="s">"Waiting for a request - navigate to http://localhost:8080"</span><span class="p">);</span>
    <span class="n">write_line</span><span class="p">(</span><span class="s">"To end - navigate to http://localhost:8080/quit"</span><span class="p">);</span>

    <span class="c1">//Get the next request that the server has
</span>    <span class="n">request</span> <span class="o">=</span> <span class="n">next_web_request</span><span class="p">(</span><span class="n">server</span><span class="p">);</span>

    <span class="k">while</span> <span class="p">(</span> <span class="o">!</span> <span class="n">is_get_request_for</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"/quit"</span><span class="p">)</span>  <span class="p">)</span>
    <span class="p">{</span>
        <span class="n">write_line</span><span class="p">(</span><span class="s">"I got a request for "</span> <span class="o">+</span> <span class="n">request_uri</span><span class="p">(</span><span class="n">request</span><span class="p">));</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">is_get_request_for</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"/login"</span><span class="p">)</span> <span class="n">or</span> <span class="n">is_get_request_for</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"/login.html"</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="c1">// Serve page for login path, e.g.
</span>            <span class="c1">// send_html_file_response(request, "login.html");
</span>
            <span class="n">send_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"login page"</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">is_get_request_for</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"/contact"</span><span class="p">)</span> <span class="n">or</span> <span class="n">is_get_request_for</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"/contact.html"</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="c1">// Serve page for contact path, e.g.
</span>            <span class="c1">// send_html_file_response(request, "contact.html");
</span>
            <span class="n">send_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"contact page"</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">is_get_request_for</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"/about"</span><span class="p">)</span> <span class="n">or</span> <span class="n">is_get_request_for</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"/about.html"</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="c1">// Server page for about path, e.g.
</span>            <span class="c1">// send_html_file_response(request, "about.html");
</span>
            <span class="n">send_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"contact page"</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="c1">//If no specified path is requested, serve index.html to the user
</span>            <span class="n">send_html_file_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"index.html"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="n">write_line</span><span class="p">(</span><span class="s">"Waiting for a request - navigate to http://localhost:8080"</span><span class="p">);</span>
        <span class="n">write_line</span><span class="p">(</span><span class="s">"To end - navigate to http://localhost:8080/quit"</span><span class="p">);</span>

        <span class="c1">//Get the next request that the server has
</span>        <span class="n">request</span> <span class="o">=</span> <span class="n">next_web_request</span><span class="p">(</span><span class="n">server</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">write_line</span><span class="p">(</span><span class="s">"About to stop the server..."</span><span class="p">);</span>
    <span class="n">stop_web_server</span><span class="p">(</span><span class="n">server</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</code></pre>
      </div>
  </div>
</div>

<p>The html for your web page would be:</p>

<div class="sk-snippet">
  <ul class="nav nav-tabs" role="tablist">
      <li class="nav-item">
        <a href="#html-routing_index" aria-controls="html-routing_index" role="tab" data-toggle="tab" class="nav-link active">
          Html
        </a>
      </li>
  </ul>
  <div class="tab-content">
      <div role="tabpanel" id="html-routing_index" class="tab-pane fade in active" data-clipboard data-clipboard-target="#html-routing_index pre">
        <pre class="codehilite"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Basic HTML Page<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"login"</span><span class="nt">&gt;</span>Login Page<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"contact"</span><span class="nt">&gt;</span>Contact Page<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"about"</span><span class="nt">&gt;</span>About Page<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></pre></td></tr></tbody></table>
</code></pre>
      </div>
  </div>
</div>

<h3>Adding Links</h3>

<p>You can add links to your <code>index.html</code> to link to the other pages we have created. The general syntax for links is </p>
<pre class="highlight plaintext"><code>&lt;a href="pathToLinkTo"&gt;Text to be clicked&lt;/a&gt;
</code></pre>
<p>For example, a link to the login page would look like</p>
<pre class="highlight plaintext"><code>&lt;p&gt;
    &lt;a href="login"&gt;Login Page&lt;/a&gt; &lt;br /&gt;
&lt;/p&gt;
</code></pre>
<p>Add links to contact and about to index.html in this same manner, then try playing around with <code>localhost:8080</code> in your browser of choice, checking out all the different pages.</p>

<h3>What next?</h3>

<p>With these concepts you should have enough to create a simple web server. You could make this more dynamic by reading details from the path in the URI, and then storing details within the program or in an associated database. The main thing to remember is that when you build a web server you need to wait for an incoming request, do some processing, and return a response.</p>

  </article>

    </div>
  </div>

    </main>
    <footer class="sk-footer">
  <div class="container">
    <ul class="sk-footer-links">
        <li>
          <a href="http://github.com/splashkit" target="_blank"> GitHub </a>
        </li>
        <li>
          <a href="http://facebook.com/splashkit" target="_blank"> Facebook </a>
        </li>
        <li>
          <a href="http://twitter.com/splashkit" target="_blank"> Twitter </a>
        </li>
    </ul>
      <p>
        SplashKit is an open source project maintained by the <a href="https://github.com/orgs/splashkit/people">core team</a> with the help of all <a href="http://github.com/splashkit/splashkit/graphs/contributors">our contributors</a>.
      </p>
      <p>
        Except as otherwise noted, SplashKit is licensed under <a href="https://www.gnu.org/licenses/gpl-3.0.en.html#content">GPL</a>.
      </p>
  </div>
</footer>

    <script src="/javascripts/main-5bcd519a.js"></script>
  </body>
</html>
